---
output: github_document
---

<!-- Run `devtools::build_readme()` after editing.  -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  dev = 'ragg_png', 
  fig.width = 8, 
  fig.height = 4, 
  collapse = TRUE, 
  comment = "#>", 
  fig.path = "man/figures/README-"
)
```

# fillpattern <img src="man/figures/logo.png" align="right" width="200" height="200" alt="fillpattern logo" />

<!-- badges: start -->
[![cran](https://img.shields.io/cran/v/fillpattern?logo=r&label=CRAN)](https://CRAN.R-project.org/package=fillpattern)
[![conda](https://img.shields.io/conda/v/conda-forge/r-fillpattern?logo=anaconda&label=conda)](https://anaconda.org/conda-forge/r-fillpattern)
[![downloads](https://cranlogs.r-pkg.org/badges/grand-total/fillpattern)](https://cranlogs.r-pkg.org/)
[![covr](https://img.shields.io/codecov/c/gh/cmmr/fillpattern?logo=codecov)](https://app.codecov.io/gh/cmmr/fillpattern)
<!-- badges: end -->


`fillpattern` streamlines the process of adding distinctive yet unobtrusive geometric patterns in place of solid grob/geom fills. The resultant figures look just as professional when viewed by colorblind readers or when printed in black and white.

Compared to the similar [`ggpattern`](https://coolbutuseless.github.io/package/ggpattern/index.html) package, `fillpattern`:

* Has no dependencies beyond base R and `ggplot2`.
* Works with `ggplot2::geom_*` functions.
* Focuses on simple geometric patterns.




## Installation

```{r, eval = FALSE}
# Install the latest stable version from CRAN:
install.packages("fillpattern")

# Or the development version from GitHub:
install.packages("pak")
pak::pak("cmmr/fillpattern")
```


## Usage

Simply add [`scale_fill_pattern()`](https://cmmr.github.io/fillpattern/reference/scale_fill_pattern.html) to your ggplot.

```{r}
library(ggplot2)
library(fillpattern)

ggplot(mpg, aes(x = class, color = drv, fill = drv)) +
  geom_bar() +
  scale_fill_pattern()
```

Works with `geom_bar()`, `geom_boxplot()`, `geom_violin()`, and other `geom_*` functions that accept a `fill` aesthetic.


### grid grobs

Set `fill = fill_pattern()` in the grob's graphical parameters.

```{r, fig.height=2}
library(grid)
library(fillpattern)

grid.newpage()
grid.circle( gp = gpar(fill = fill_pattern("grid")), x = 1/4, r = 3/8)
grid.rect(   gp = gpar(fill = fill_pattern("fish")), width = 1/5, height = 3/4)
grid.polygon(gp = gpar(fill = fill_pattern("brick")), x = c(6,7,5)/8, y = c(7,1,1)/8)
```



## Basic Patterns

Use any of these pattern names in [`fill_pattern()`](https://cmmr.github.io/fillpattern/reference/fill_pattern.html) or [`scale_fill_pattern()`](https://cmmr.github.io/fillpattern/reference/scale_fill_pattern.html).

```{r, echo = FALSE}

grid.newpage()

invisible(mapply(
  p = c(
    "brick", "chevron", "fish", "grid", "herringbone", "hexagon", 
    "octagon", "saw", "shingle", "rshingle", "stripe", "wave" ), 
  x = rep(1:4 / 4, times = 3) - 1/8, 
  y = rep(3:1 / 3, each  = 4) - 1/6, 
  function (p, x, y) {
    gp <- gpar(fill = fill_pattern(p))
    grid.rect(x = x, y = y - .03, width = .2, height = .2, gp = gp)
    grid.text(x = x, y = y + .11, label = p)
}))
   
```


## Modified Patterns

For each basic pattern, you can specify the foreground color, background color, line width/style, tile size/rotation, and more through arguments to [`fill_pattern()`](https://cmmr.github.io/fillpattern/reference/fill_pattern.html) and [`scale_fill_pattern()`](https://cmmr.github.io/fillpattern/reference/scale_fill_pattern.html).

Most modifications can be specified as part of the pattern name (shown below).

```{r, echo = FALSE}

grid.newpage()

invisible(mapply(
  p = c(
    "brick20", "chevron_2dashed", "fish_dotted", "grid_longdash", 
    "herringbone45", "hexagon_sm", "octagon_:sm", "saw_16mm:8mm", 
    "shingle_3lwd", "rshingle_dotted", "stripe35_lg", "wave45_sm" ), 
  x = rep(1:4 / 4, times = 3) - 1/8, 
  y = rep(3:1 / 3, each  = 4) - 1/6, 
  function (p, x, y) {
    gp <- gpar(fill = fill_pattern(p))
    grid.rect(x = x, y = y - .03, width = .2, height = .2, gp = gp)
    grid.text(x = x, y = y + .11, label = p)
}))
   
```


For additional details, see the [`fill_pattern()`](https://cmmr.github.io/fillpattern/reference/fill_pattern.html) and [`scale_fill_pattern()`](https://cmmr.github.io/fillpattern/reference/scale_fill_pattern.html) reference pages.
